<form (ngSubmit)="fn_newOpportunity()" #opptForm="ngForm">
    <div class="modal-content pt-0 mt-0">
        <div class="modal-header">
            <strong class="modal-title" id="modal-basic-title">New Opportunity</strong>
            <button type="button" class="close" aria-label="Close" (click)="close()">
                <span aria-hidden="true">&times;</span>
            </button>
        </div>

        <div class="modal-body">

            <div class="form-group basic">
                <div class="input-wrapper">
                    <label class="label" for="id_company">Company</label>
                    <select class="form-control" id="id_company" name="id_company" [(ngModel)]="model.id_company" (change)="updateContact();" required> 
                        <option *ngFor="let x of company" value="{{x.id}}"> {{x.name}} </option>
                    </select>

                </div>
            </div>



            <div class="form-group basic">
                <div class="input-wrapper">
                    <label class="label" for="h21"> Name </label>
                    <select class="form-control " id="id_contact" name="id_contact" [(ngModel)]="model.id_contact" required>
                        <option *ngFor="let x of contact" value="{{x.id}}"> {{x.name}} </option>
                    </select>
                </div>
            </div>

             <div class="form-group basic">
                <div class="input-wrapper">
                    <label class="label" for="h21"> Opportunity Name </label>
                    <input type="text" class="form-control" id="name" required [(ngModel)]="model.name" name="name" #name="ngModel">
                    <div [hidden]="name.valid || name.pristine" class="alert alert-danger"> Name is required </div>
                </div>
            </div>


             <div class="form-group basic">
                <div class="input-wrapper">
                    <label class="label" for="hx21"> Lead Source </label>
                    <select class="form-control " id="hx21" name="id_lead_source" [(ngModel)]="model.id_lead_source" required>
                        <option *ngFor="let x of lead_source" value="{{x.id}}"> {{x.name}} </option>
                    </select>
                </div>
            </div>

             <div class="form-group basic">
                <div class="input-wrapper">
                    <label class="label" for="h21" id="h21"> Amount Estimation (IDR) </label>
                    <input type="text" class="form-control" name="amount" [(ngModel)]="model.amount" maxlength="250" id="h21" currencyMask>
                </div>
            </div>



             <div class="form-group basic">
                <div class="input-wrapper">
                    <label class="label"   for="h21" id="s1"> Expecting Closing Date </label>
                    <input type="text" id="s1" class="form-control border" name="expecting_closing_date" [(ngModel)]="model.expecting_closing_date" readonly (click)="dp.toggle()" name="dp" ngbDatepicker #dp="ngbDatepicker" required>
                </div>
            </div>

             <div class="form-group basic">
                <div class="input-wrapper">
                    <label  class="label"  for="h21" id="s3"> Opportunity Onwer </label>
                    <select class="form-control " id="id_user" name="id_user" [(ngModel)]="model.id_user"> 
                        <option *ngFor="let x of user" value="{{x.id}}"> {{x.name}} </option>
                    </select>
                </div>

            </div>

        </div>

        <div class="modal-footer">

            <button type="button" class="btn btn-outline-dark" (click)="close()">Cancel</button>
            <button type="submit" class="btn btn-primary" [disabled]="!opptForm.form.valid">Save & Next</button>

        </div>

    </div>

</form>